# merging shutdown data into panel
gdelt_panel <- gdelt_panel %>%
mutate(ActionGeo_ADM2Code = as.double(ActionGeo_ADM2Code)) %>%
left_join(ShutdownData, by = c("year", "week", "ActionGeo_ADM2Code")) %>%
mutate(shutdown = ifelse(is.na(shutdown), 0, shutdown))
# creating groups for callawa-santa'anna diff-in-diff (first time treated)
gdelt_did_groups <- gdelt_panel %>%
filter(shutdown == 1) %>%
group_by(ActionGeo_ADM2Code) %>%
summarise(group = min(time))
gdelt_panel <- gdelt_panel %>%
left_join(gdelt_did_groups, by = "ActionGeo_ADM2Code") %>%
mutate(group = ifelse(is.na(group), 0, group))
write_csv(gdelt_panel, "Data/GDELT/gdelt_panel.csv")
#### CONSRTRUCTING PANEL FOR TONE DATA ####
# dropping obs with missing district
# fixing date format and renaming vars
raw_tone_data <- raw_tone_data %>%
filter(!is.na(Actor1Geo_ADM2Code)) %>%
mutate(date = as.Date(as.character(SQLDATE), "%Y%m%d")) %>%
select(!SQLDATE) %>%
rename(GovEvents = f0_, GovTone = f1_)
raw_tone_data_2 <- raw_tone_data_2 %>%
filter(!is.na(Actor1Geo_ADM2Code)) %>%
mutate(date = as.Date(as.character(SQLDATE), "%Y%m%d")) %>%
select(!SQLDATE) %>%
rename(OppEvents = f0_, OppTone = f1_)
# creates list of unique adm2 codes
Actor1Geo_ADM2Code <- raw_tone_data %>%
bind_rows(raw_tone_data_2) %>%
distinct(Actor1Geo_ADM2Code)
# creating `blank` panel
dates <- data.frame(date=date_list) %>%
mutate(date = as.Date(date)) %>%
crossing(Actor1Geo_ADM2Code) %>%
arrange(Actor1Geo_ADM2Code, date)
# merging in gdelt tone data
gdelt_tone_panel <- dates %>%
left_join(raw_tone_data, by = c("Actor1Geo_ADM2Code", "date")) %>%
left_join(raw_tone_data_2, by = c("Actor1Geo_ADM2Code", "date")) %>%
arrange(Actor1Geo_ADM2Code, date)
#### AGGREGATING TONE DATA TO WEEKLY LEVEL ####
gdelt_tone_panel <- gdelt_tone_panel %>%
mutate(year = year(date), week = week(date)) %>%
group_by(Actor1Geo_ADM2Code, year, week) %>%
summarize(GovEvents = sum(GovEvents, na.rm = TRUE),
OppEvents = sum(OppEvents, na.rm = TRUE),
GovTone = sum(GovTone, na.rm = TRUE),
OppTone = sum(OppTone, na.rm = TRUE)) %>%
ungroup() %>%
mutate(AvgGovTone = ifelse(GovEvents != 0, GovTone/GovEvents, NA),
AvgOppTone = ifelse(OppEvents != 0, OppTone/OppEvents, NA)) %>%
group_by(year, week) %>%
mutate(time = cur_group_id()) %>%
ungroup() %>%
relocate(time, .before = GovEvents)
#### MERGING IN SHUTDOWN DATA TO TONE PANEL ####
# keeping relevant vars
ADM2Crosswalk <- select(ADM2CrosswalkRaw, GAULADM2Code, GAULADM2Name) %>%
rename(Actor1Geo_ADM2Code = GAULADM2Code)
# creating list of unique districts
Actor1Geo_ADM2Code <- Actor1Geo_ADM2Code %>%
mutate(Actor1Geo_ADM2Code = as.double(Actor1Geo_ADM2Code)) %>%
left_join(ADM2Crosswalk, by = "Actor1Geo_ADM2Code", multiple = "all") %>%
distinct() %>%
filter(GAULADM2Name != "Administrative unit not available") %>%
mutate(GAULADM2Name = tolower(GAULADM2Name))
# defining pattern for extraction
district_pattern <- paste(unique(Actor1Geo_ADM2Code$GAULADM2Name),
collapse = "|")
# Adding district names to shutdown data
ShutdownData2 <- ShutdownDataRaw %>%
mutate(year = year(start_date), week = week(start_date),
GAULADM2Name = str_extract_all(area_name, district_pattern)) %>%
mutate(GAULADM2Name = ifelse(lengths(GAULADM2Name)==0, NA, GAULADM2Name)) %>%
filter(!is.na(GAULADM2Name)) %>%
unnest(GAULADM2Name) %>%
left_join(Actor1Geo_ADM2Code, by = "GAULADM2Name") %>%
select(year, week, Actor1Geo_ADM2Code) %>%
distinct() %>%
mutate(shutdown = 1)
# merging shutdown data into panel
gdelt_tone_panel <- gdelt_tone_panel %>%
mutate(Actor1Geo_ADM2Code = as.double(Actor1Geo_ADM2Code)) %>%
left_join(ShutdownData2, by = c("year", "week", "Actor1Geo_ADM2Code")) %>%
mutate(shutdown = ifelse(is.na(shutdown), 0, shutdown))
# creating groups for callawa-santa'anna diff-in-diff (first time treated)
gdelt_tone_did_groups <- gdelt_tone_panel %>%
filter(shutdown == 1) %>%
group_by(Actor1Geo_ADM2Code) %>%
summarise(group = min(time))
gdelt_tone_panel <- gdelt_tone_panel %>%
left_join(gdelt_tone_did_groups, by = "Actor1Geo_ADM2Code") %>%
mutate(group = ifelse(is.na(group), 0, group))
# saving data
write_csv(gdelt_tone_panel, "Data/GDELT/gdelt_tone_panel.csv", na = "")
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
install.packages("stargazer")
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
View(prowess_panel)
?panel
?stargazer
View(gdelt_tone_panel)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(gdelt_panel[c("assault_count", "fight_count", "protest_count")],
gdelt_tone_panel["AvgGovTone"],
prowess_panel[c("AvgBSEPrice", "AvgNSEPrice")])
#### COMPUTING SUMMARY STATISTICS ####
stargazer(gdelt_panel[c("assault_count", "fight_count", "protest_count")],
gdelt_tone_panel[c("AvgGovTone")],
prowess_panel[c("AvgBSEPrice", "AvgNSEPrice")])
#### COMPUTING SUMMARY STATISTICS ####
stargazer(gdelt_panel[c("assault_count", "fight_count", "protest_count")],
gdelt_tone_panel[c("AvgGovTone")],
prowess_panel[c("AvgBSEPrice", "AvgNSEPrice")])
stargazer(gdelt_panel[c("assault_count", "fight_count", "protest_count")])
stargazer(gdelt_panel[c("assault_count", "fight_count", "protest_count")], type = "txt")
stargazer(gdelt_panel[c("assault_count", "fight_count", "protest_count")],
type = "text")
View(gdelt_panel)
stargazer(gdelt_panel,
type = "text")
gdelt_panel_test <- gdelt_panel[c("assault_count", "protest_count", "fight_count")]
View(gdelt_panel_test)
gdelt_tone_panel[c("AvgGovTone")]
stargazer(gdelt_panel[c("assault_count", "protest_count", "fight_count")]
gdelt_tone_panel[c("AvgGovTone")],
stargazer(gdelt_panel[c("assault_count", "protest_count", "fight_count")],
gdelt_tone_panel[c("AvgGovTone")],
prowess_panel[c("AvgBSEPrice", "AvgNSEPrice")]),
stargazer(gdelt_panel[c("assault_count", "protest_count", "fight_count")],
gdelt_tone_panel[c("AvgGovTone")],
prowess_panel[c("AvgBSEPrice", "AvgNSEPrice")],
type = "text")
gdelt_panel["assault_count"]
stargazer(gdelt_panel[c("assault_count", "protest_count", "fight_count")],
gdelt_tone_panel["AvgGovTone"],
prowess_panel[c("AvgBSEPrice", "AvgNSEPrice")],
type = "text")
stargazer(gdelt_panel["assalt_count"],
gdelt_tone_panel["AvgGovTone"],
type = "text")
stargazer(gdelt_panel["assault_count"],
gdelt_tone_panel["AvgGovTone"],
type = "text")
stargazer(as.data.frame(gdelt_panel["assault_count"]),
as.data.frame(gdelt_tone_panel["AvgGovTone"]),
type = "text")
stargazer(as.data.frame(gdelt_panel[c("assault_count", "fight_count", "protest_count")]),
as.data.frame(gdelt_tone_panel["AvgGovTone"]),
as.data.frame(prowess_panel[c("AvgBSEPrice", "AvgNSEPrice")])
type = "text")
stargazer(as.data.frame(gdelt_panel[c("assault_count", "fight_count", "protest_count")]),
as.data.frame(gdelt_tone_panel["AvgGovTone"]),
type = "text")
?keep
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
keep(assault_count, fight_count, protest_count)
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count)
View(gdelt_panel)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
View(prowess_panel)
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice)
stargazer(gdelt_panel, gdelt_tone_panel, prowess_panel, type = "text")
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.dara.frame(prowess_panel),
type = "text")
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "text")
stargazer(as.data.frame(gdelt_panel), type = "text")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename(tone = AvgGovTone)
View(gdelt_tone_panel)
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
type = "text")
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "text")
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename(tone = AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice) %>%
rename(BSE = AvgBSEPrice NSE = AvgNSEPrice)
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename(tone = AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice) %>%
rename(BSE = AvgBSEPrice, NSE = AvgNSEPrice)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "text")
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename(tone = AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice) %>%
rename(B = AvgBSEPrice, N = AvgNSEPrice)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "text")
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename(tone = AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice) %>%
rename(B = AvgBSEPrice, N = AvgNSEPrice)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
#as.data.frame(prowess_panel),
type = "text")
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count) %>%
rename(protests = protest_count, assaults = assault_count, fights = fight_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename(tone = AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice) %>%
rename(B = AvgBSEPrice, N = AvgNSEPrice)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
#as.data.frame(prowess_panel),
type = "text")
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count) %>%
rename(protests = protest_count, assaults = assault_count, fights = fight_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename(tone = AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice) %>%
rename(B = AvgBSEPrice, N = AvgNSEPrice)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "text")
## Quick fix for stargazer <= 5.2.3 is.na() issue with long model names in R >= 4.2
# Unload stargazer if loaded
detach("package:stargazer",unload=T)
# Delete it
remove.packages("stargazer")
# Download the source
download.file("https://cran.r-project.org/src/contrib/stargazer_5.2.3.tar.gz", destfile = "stargazer_5.2.3.tar.gz")
# Unpack
untar("stargazer_5.2.3.tar.gz")
# Read the sourcefile with .inside.bracket fun
stargazer_src <- readLines("stargazer/R/stargazer-internal.R")
# Move the length check 5 lines up so it precedes is.na(.)
stargazer_src[1990] <- stargazer_src[1995]
stargazer_src[1995] <- ""
# Save back
writeLines(stargazer_src, con="stargazer/R/stargazer-internal.R")
# Compile and install the patched package
install.packages("stargazer", repos = NULL, type="source")
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count) %>%
rename(protests = protest_count, assaults = assault_count, fights = fight_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename(tone = AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice) %>%
rename(B = AvgBSEPrice, N = AvgNSEPrice)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "text")
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "text")
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "text",
title = c("Panel A: Political Events", "Panel B: Political Attitudes",
"Panel C: Stock Prices"))
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count) %>%
rename(Assaults = assault_count, Fights = fight_count, Protests = protest_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename("Average Tone of Gov Events" = AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice) %>%
rename("Average BSE Opening Price" = AvgBSEPrice,
"Average NSE Opening Price" = AvgNSEPrice)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "text",
title = c("Panel A: Political Events", "Panel B: Political Attitudes",
"Panel C: Stock Prices"))
?stargazer
?stargazer
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count) %>%
rename(Assaults = assault_count, Fights = fight_count, Protests = protest_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename("Average Tone of Gov Events" = AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice) %>%
rename("Average BSE Opening Price" = AvgBSEPrice,
"Average NSE Opening Price" = AvgNSEPrice)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "latex",
title = c("Panel A: Political Events", "Panel B: Political Attitudes",
"Panel C: Stock Prices"),
out = "results/Draft2Tables/summarystats.tex")
# Faiz Essa
# Summary Stats for paper
# April 26th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(stargazer)
# importing data
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv") %>%
select(assault_count, fight_count, protest_count) %>%
rename(Assaults = assault_count, Fights = fight_count, Protests = protest_count)
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv") %>%
select(AvgGovTone) %>%
rename("Average Tone of Gov Events" = AvgGovTone)
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv") %>%
select(AvgBSEPrice, AvgNSEPrice) %>%
rename("Average BSE Opening Price" = AvgBSEPrice,
"Average NSE Opening Price" = AvgNSEPrice)
#### COMPUTING SUMMARY STATISTICS ####
stargazer(as.data.frame(gdelt_panel),
as.data.frame(gdelt_tone_panel),
as.data.frame(prowess_panel),
type = "latex",
out = "results/Draft2Tables/summarystats.tex")
