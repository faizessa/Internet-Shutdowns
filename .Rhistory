# cleaning polity5
polity5 <- polity5 %>%
filter(year == 2018, polity2 >= -10 | polity2 <= 10) %>%
select(country, polity2) %>%
mutate(iso3c = countrycode(country, origin="country.name", destination = "iso3c"))  %>%
select(!country)
# importing GDP per capita and population data
gdp <- wb_data(c("NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), mrv = 1) %>%
rename(gdppc = "NY.GDP.PCAP.PP.CD", pop = "SP.POP.TOTL") %>%
select(country, iso3c, gdppc, pop)
shutdowns_by_country <- gdp %>%
left_join(shutdowns_by_country, by = "iso3c") %>%
left_join(polity5, by = "iso3c") %>%
mutate(shutdowns = ifelse(is.na(shutdowns), 0, shutdowns))
# adding labels
labeled_countries <- shutdowns_by_country %>%
filter(shutdowns >= 15) %>%
mutate(label = country) %>%
mutate(label = ifelse(iso3c == "IRN", "Iran", label),
label = ifelse(iso3c == "YEM", "Yemen", label),
label = ifelse(iso3c == "SYR", "Syria", label)) %>%
select(iso3c, label)
shutdowns_by_country <- shutdowns_by_country %>%
left_join(labeled_countries, by = "iso3c")
# generating plots
ggplot(shutdowns_by_country, aes(x = log(gdppc), y = log(shutdowns+1))) +
geom_point(aes(size = pop), shape = 1, color = "light blue") +
geom_smooth(method = lm, color = "black") +
geom_label_repel(aes(label = label),
box.padding   = 0.3,
point.padding = 0.3,
min.segment.length = .25,
segment.color = 'grey50') +
theme_light() +
theme(text = element_text(size = 17)) +
theme(legend.position = "none") +
ylab("log(# of Shutdowns + 1)") +
xlab("log(GDP per Capita, PPP) (2021)")
ggsave("results/Draft2DescriptiveV2/gdpplot.pdf")
ggplot(shutdowns_by_country, aes(x = polity2, y = log(shutdowns+1))) +
geom_point(aes(size = pop), shape = 1, color = "light blue") +
geom_smooth(method = lm, color = "black") +
geom_label_repel(aes(label = label),
box.padding   = 0.3,
point.padding = 0.3,
min.segment.length = .25,
segment.color = 'grey50') +
theme_light() +
theme(text = element_text(size = 17)) +
theme(legend.position = "none") +
ylab("log(# of Shutdowns + 1)") +
xlab("polity score (2018)")
ggsave("results/Draft2DescriptiveV2/polityplot.pdf")
#### Bar graph with most common places to shut down internet ####
shutdowns_by_country <- shutdowns_by_country %>%
filter(!is.na(label)) %>%
select(label, shutdowns, percent)
ggplot(shutdowns_by_country, aes(x=reorder(label, -shutdowns), y=shutdowns)) +
geom_bar(stat="identity", fill='steelblue') +
geom_text(aes(label=percent), vjust=-0.25) +
theme_light() +
theme(text = element_text(size = 17)) +
theme(axis.text.x=element_text(angle=45, hjust=1)) +
xlab("Countries with at least 15 internet shutdowns") +
ylab("# of Internet Shutdowns")
ggsave("results/Draft2DescriptiveV2/ShutdownsByCountry.pdf")
#### Line plot with shutdowns over time ####
# organizing data
shutdowns_by_time <- ShutdownData %>%
mutate(month=month(start_date),
year=year(start_date)) %>%
unite(year_month, year, month)
shutdowns_by_time <- ShutdownData %>%
mutate(month=month(start_date),
year=year(start_date)) %>%
group_by(year, month) %>%
summarize(shutdowns = n()) %>%
ungroup() %>%
filter(year >= 2016) %>%
mutate(date = as.Date(paste(year,month,"01", sep="-")))
ggplot(shutdowns_by_time, aes(x=date, y=shutdowns)) +
geom_line() +
theme_light() +
theme(text = element_text(size = 17)) +
xlab("Time") +
ylab("# of Internet Shutdowns")
ggsave("results/Draft2DescriptiveV2/ShutdownsOverTime.png")
#### Shutdown Durations Summary Statistics####
durations <- select(ShutdownData, duration) %>%
filter(!is.na(duration)) %>%
rename("Shutdown Duration" = duration)
stargazer(durations, type = "latex", out = "results/Draft2DescriptiveV2/ShutdownDurations.tex")
# I use these results to add to my table in latex
#### Shutdown Geographic Scope Bar Graph ####
shutdowns_by_geo <- ShutdownData %>%
group_by(geo_scope) %>%
summarize(shutdowns = n()) %>%
ungroup() %>%
mutate(percent = round(shutdowns/sum(shutdowns), digits = 2) * 100) %>%
mutate(percent = paste(as.character(percent), "%", sep = "")) %>%
filter(!is.na(geo_scope))
ggplot(shutdowns_by_geo, aes(x=reorder(geo_scope, -shutdowns), y=shutdowns)) +
geom_bar(stat="identity", fill='steelblue') +
geom_text(aes(label=percent), vjust=-0.25) +
theme_light() +
theme(text = element_text(size = 17)) +
theme(axis.text.x=element_text(angle=45, hjust=1)) +
xlab("Geographic Scope") +
ylab("# of Internet Shutdowns")
ggsave("results/Draft2DescriptiveV2/ShutdownsByGeoScope.pdf")
#### Shutdown Geographic Scope Bar Graph ####
shutdowns_by_extent <- ShutdownData %>%
group_by(shutdown_extent) %>%
summarize(shutdowns = n()) %>%
ungroup() %>%
mutate(percent = round(shutdowns/sum(shutdowns), digits = 2) * 100) %>%
mutate(percent = paste(as.character(percent), "%", sep = "")) %>%
filter(!is.na(shutdown_extent))
ggplot(shutdowns_by_extent, aes(x=reorder(shutdown_extent, -shutdowns), y=shutdowns)) +
geom_bar(stat="identity", fill='steelblue') +
geom_text(aes(label=percent), vjust=-0.25) +
theme_light() +
theme(text = element_text(size = 17)) +
xlab("Extent to which services are blocked") +
ylab("# of Internet Shutdowns")
ggsave("results/Draft2DescriptiveV2/ShutdownsByExtent.pdf")
rm(list=ls())
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
# time to first shutdown
mutate(time_from_sd = ifelse(group == 0, 0, time-group)) %>%
# set >= 8 to 8, set <= -8 to -8
mutate(time_from_sd = ifelse(time_from_sd <= -8, -8, time_from_sd),
time_from_sd = ifelse(time_from_sd >=8, 8, time_from_sd)) %>%
mutate(cohort = ifelse(group == 0, 1000, group))
View(gdelt_panel)
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
# time to first shutdown
mutate(time_from_sd = ifelse(group == 0, 0, time-group)) %>%
# set >= 8 to 8, set <= -8 to -8
mutate(time_from_sd = ifelse(time_from_sd <= -8, -8, time_from_sd),
time_from_sd = ifelse(time_from_sd >=8, 8, time_from_sd)) %>%
mutate(cohort = ifelse(group == 0, 100, group))
?sunab
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
# time to first shutdown
mutate(time_from_sd = ifelse(group == 0, 0, time-group)) %>%
# set >= 8 to 8, set <= -8 to -8
mutate(time_from_sd = ifelse(time_from_sd <= -8, -8, time_from_sd),
time_from_sd = ifelse(time_from_sd >=8, 8, time_from_sd)) %>%
mutate(cohort = ifelse(group == 0, 100, group))
gdelt_tone_panel <- gdelt_tone_panel %>%
# time to first shutdown
mutate(time_from_sd = ifelse(group == 0, 0, time-group)) %>%
# set >= 8 to 8, set <= -8 to -8
mutate(time_from_sd = ifelse(time_from_sd <= -8, -8, time_from_sd),
time_from_sd = ifelse(time_from_sd >=8, 8, time_from_sd)) %>%
mutate(zscore = scale(AvgGovTone))
prowess_panel <- prowess_panel %>%
# time to first shutdown
mutate(time_from_sd = ifelse(group == 0, 0, time-group)) %>%
# set >= 8 to 8, set <= -8 to -8
mutate(time_from_sd = ifelse(time_from_sd <= -8, -8, time_from_sd),
time_from_sd = ifelse(time_from_sd >=8, 8, time_from_sd))
#### GDELT EVENT REGRESSIONS ####
# list of dependent vari
gdelt_depvars <- c("assault_count", "fight_count", "protest_count",
"log_assaults", "log_fights", "log_protests")
# running regressions
for (y in gdelt_depvars){
formula <- as.formula(
paste(y, "~sunab(cohort, time_from_sd,ref=-4) | ActionGeo_ADM2Code + time",
sep = ""))
model <- feols(formula,
cluster = ~ActionGeo_ADM2Code,
data = gdelt_panel)
assign(y, model)
rm(formula, model)
}
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
mutate(group = ifelse(group == 0, 100, group)) %>%
# time to first shutdown
mutate(time_from_sd = time-group) %>%
# set >= 8 to 8, set <= -8 to -8
mutate(time_from_sd = ifelse(time_from_sd <= -8, -8, time-group),
time_from_sd = ifelse(time_from_sd >=8, 8, time-group)) %>%
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
mutate(group = ifelse(group == 0, 100, group)) %>%
# time to first shutdown
mutate(time_from_sd = time-group) %>%
# set >= 8 to 8, set <= -8 to -8
mutate(time_from_sd = ifelse(time_from_sd <= -8, -8, time-group),
time_from_sd = ifelse(time_from_sd >=8, 8, time-group))
View(gdelt_panel)
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
mutate(group = ifelse(group == 0, 100, group)) %>%
# time to first shutdown
mutate(time_from_sd = time-group) %>%
# set >= 8 to 8, set <= -8 to -8
mutate(time_from_sd = ifelse(time_from_sd <= -8, -8, time_from_sd),
time_from_sd = ifelse(time_from_sd >=8, 8, time_from_sd))
#### GDELT EVENT REGRESSIONS ####
# list of dependent vari
gdelt_depvars <- c("assault_count", "fight_count", "protest_count",
"log_assaults", "log_fights", "log_protests")
# running regressions
for (y in gdelt_depvars){
formula <- as.formula(
paste(y, "~sunab(cohort, time_from_sd,ref=-4) | ActionGeo_ADM2Code + time",
sep = ""))
model <- feols(formula,
cluster = ~ActionGeo_ADM2Code,
data = gdelt_panel)
assign(y, model)
rm(formula, model)
}
# running regressions
for (y in gdelt_depvars){
formula <- as.formula(
paste(y, "~sunab(group, time_from_sd,ref=-4) | ActionGeo_ADM2Code + time",
sep = ""))
model <- feols(formula,
cluster = ~ActionGeo_ADM2Code,
data = gdelt_panel)
assign(y, model)
rm(formula, model)
}
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
# time to first shutdown
mutate(time_from_sd = ifelse(group == 0, 0, time-group)) %>%
# set >= 8 to 8, set <= -8 to -8
mutate(time_from_sd = ifelse(time_from_sd <= -8, -8, time_from_sd),
time_from_sd = ifelse(time_from_sd >=8, 8, time_from_sd)) %>%
mutate(cohort = ifelse(group == 0, 100, group))
# list of dependent variables
gdelt_depvars <- c("assault_count", "fight_count", "protest_count",
"log_assaults", "log_fights", "log_protests")
# running regressions
for (y in gdelt_depvars){
formula <- as.formula(
paste(y, "~sunab(cohort, time_from_sd,ref.p=-4) | ActionGeo_ADM2Code + time",
sep = ""))
model <- feols(formula,
cluster = ~ActionGeo_ADM2Code,
data = gdelt_panel)
assign(y, model)
rm(formula, model)
}
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
mutate(cohort = ifelse(group == 0, 100, group)) %>%
mutate(rel_time = time-cohort) %>%
mutate(rel_time = ifelse(rel_time <= -8, -8, rel_time),
rel_time = ifelse(rel_time >=8, 8, rel_time))
gdelt_tone_panel <- gdelt_tone_panel %>%
mutate(cohort = ifelse(group == 0, 100, group)) %>%
mutate(rel_time = time-cohort) %>%
mutate(rel_time = ifelse(rel_time <= -8, -8, rel_time),
rel_time = ifelse(rel_time >=8, 8, rel_time)) %>%
mutate(zscore = scale(AvgGovTone))
prowess_panel <- prowess_panel %>%
mutate(cohort = ifelse(group == 0, 100, group)) %>%
mutate(rel_time = time-cohort) %>%
mutate(rel_time = ifelse(rel_time <= -8, -8, rel_time),
rel_time = ifelse(rel_time >=8, 8, rel_time))
View(gdelt_panel)
View(gdelt_tone_panel)
rm(list=ls())
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
mutate(cohort = ifelse(group == 0, 100, group)) %>%
mutate(rel_time = time-cohort) %>%
mutate(rel_time = ifelse(rel_time <= -8, -8, rel_time),
rel_time = ifelse(rel_time >=8, 8, rel_time))
gdelt_tone_panel <- gdelt_tone_panel %>%
mutate(cohort = ifelse(group == 0, 100, group)) %>%
mutate(rel_time = time-cohort) %>%
mutate(rel_time = ifelse(rel_time <= -8, -8, rel_time),
rel_time = ifelse(rel_time >=8, 8, rel_time)) %>%
mutate(zscore = scale(AvgGovTone))
prowess_panel <- prowess_panel %>%
mutate(cohort = ifelse(group == 0, 100, group)) %>%
mutate(rel_time = time-cohort) %>%
mutate(rel_time = ifelse(rel_time <= -8, -8, rel_time),
rel_time = ifelse(rel_time >=8, 8, rel_time))
#### GDELT EVENT REGRESSIONS ####
# list of dependent variables
gdelt_depvars <- c("assault_count", "fight_count", "protest_count",
"log_assaults", "log_fights", "log_protests")
# running regressions
for (y in gdelt_depvars){
formula <- as.formula(
paste(y, "~sunab(cohort, rel_time, ref.p=-4) | ActionGeo_ADM2Code + time",
sep = ""))
model <- feols(formula,
cluster = ~ActionGeo_ADM2Code,
data = gdelt_panel)
assign(y, model)
rm(formula, model)
}
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
mutate(rel_time = ifelse(group != 0, time-group, NA) %>%
mutate(rel_time = ifelse(rel_time <= -8, -8, rel_time),
rel_time = ifelse(rel_time >=8, 8, rel_time)) %>%
mutate(cohort = ifelse(group == 0, 100, group))
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
mutate(rel_time = ifelse(group != 0, time-group, NA) %>%
mutate(rel_time = ifelse(rel_time <= -8, -8, rel_time),
rel_time = ifelse(rel_time >=8, 8, rel_time)) %>%
mutate(cohort = ifelse(group == 0, 100, group))
)
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
mutate(rel_time = ifelse(group != 0, time-group, NA)) %>%
mutate(rel_time = ifelse(rel_time <= -8, -8, rel_time),
rel_time = ifelse(rel_time >=8, 8, rel_time)) %>%
mutate(cohort = ifelse(group == 0, 100, group))
View(gdelt_panel)
# test
test <- feols(log_protests ~ sunab(cohort, rel_time, ref.p=-4) |
Actor1Geo_ADM2Code + time,
cluster = ~ActionGeo_ADM2Code,
data = gdelt_panel)
# Faiz Essa
# Event Studies April 29th
# April 29th, 2023
#### SETUP ####
rm(list=ls())
# importing packages
library(tidyverse)
library(fixest)
library(readr)
# data import
gdelt_panel <- read_csv("Data/GDELT/gdelt_panel.csv")
gdelt_tone_panel <- read_csv("Data/GDELT/gdelt_tone_panel.csv")
prowess_panel <- read_csv("Data/Prowess/prowess_panel.csv")
#### DATA WRANGLING ####
gdelt_panel <- gdelt_panel %>%
mutate(rel_time = ifelse(group != 0, time-group, NA)) %>%
mutate(rel_time = ifelse(rel_time <= -8, -8, rel_time),
rel_time = ifelse(rel_time >=8, 8, rel_time)) %>%
mutate(cohort = ifelse(group == 0, 100, group))
# test
test <- feols(log_protests ~ sunab(cohort, rel_time, ref.p=-4) |
ActionGeo_ADM2Code + time,
cluster = ~ActionGeo_ADM2Code,
data = gdelt_panel)
rm(list=ls())
